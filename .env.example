################################################################
# MERCATOR ENVIRONEMENT
################################################################
APP_NAME=Mercator
APP_ENV=local
APP_URL=http://localhost:8080
APP_FORCE_HTTPS=false

################################################################
# APPICATION KEY
################################################################
APP_KEY=

################################################################
# DEBUG and DB-TRACE
################################################################
APP_DEBUG=false
APP_DB_TRACE=false
LOG_CHANNEL=stack

################################################################
# DATABASE CONNEXION
################################################################
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=mercator
DB_USERNAME=mercator_user
DB_PASSWORD=s3cr3t

#################################################################
# API Rate Limiting
#################################################################
# Limits API requests to protect server resources
# Format: API_RATE_LIMIT requests per API_RATE_LIMIT_DECAY minute(s)
#
# Examples:
#   60,1 = 60 req/min (default - normal usage)
#   120,1 = 120 req/min (development/testing)
#   1000,60 = 1000 req/hour (public API)
#   10000,1440 = 10000 req/day (third-party integrations)
#
# Returns HTTP 429 (Too Many Requests) when exceeded
#################################################################
API_RATE_LIMIT=60
API_RATE_LIMIT_DECAY=1

#################################################################
# Reset password sender email adresse
#################################################################
MAIL_FROM_ADDRESS="mercator@your-domain.org"
MAIL_FROM_NAME="Mercator"

#################################################################
# Common Platform Enumeration (CPE)
#################################################################
# URL configurable pour s’adapter aux changements de distribution CPE
CPE_API_URL=https://services.nvd.nist.gov/rest/json/cpes/2.0
# Clé API NVD (optionnelle mais recommandée)
NVD_API_KEY=

#################################################################
# LDAP
#################################################################
# - If LDAP_ENABLED=true => try LDAP; on success, log the mapped local user in.
# - If LDAP fails and LDAP_FALLBACK_LOCAL=true => try local DB credentials.
# - If LDAP_ENABLED=false => only local DB credentials.
LDAP_ENABLED=false
LDAP_FALLBACK_LOCAL=true
LDAP_AUTO_PROVISION=false
LDAP_AUTO_PROVISION_ROLE="User"

# Config
LDAP_LOGGING=true
LDAP_CONNECTION=default
LDAP_HOST=127.0.0.1
LDAP_USERNAME="cn=admin,dc=example,dc=org"
LDAP_PASSWORD=admin
LDAP_PORT=389
LDAP_USERS_BASE_DN="cn=users,dc=example,dc=org"
LDAP_TIMEOUT=5
LDAP_SSL=false
LDAP_TLS=false
LDAP_LOGIN_ATTRIBUTES="uid,cn,mail,sAMAccountName,userPrincipalName"
LDAP_NESTED_GROUPS=false
LDAP_GROUP=

#################################################################

BROADCAST_DRIVER=log
CACHE_DRIVER=file
QUEUE_CONNECTION=sync
SESSION_DRIVER=file
SESSION_LIFETIME=120

MAIL_HOST=mail.domain
MAIL_PORT=587
MAIL_AUTH=true
MAIL_SMTP_SECURE='tls'
MAIL_SMTP_AUTO_TLS=true
MAIL_USERNAME=
MAIL_PASSWORD=

# MAIL_DKIM_DOMAIN = 'yourdomain.com'
# MAIL_DKIM_PRIVATE = '/path/to/private/key'
# MAIL_DKIM_SELECTOR = 'default'
# MAIL_DKIM_PASSPHRASE = ''

MIX_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
MIX_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

##########################################################################
# KeyCloak Configuration
KEYCLOAK_ENABLED=false
KEYCLOAK_CLIENT_ID="ClientId"
KEYCLOAK_CLIENT_SECRET="Secret"
KEYCLOAK_REDIRECT_URI="<Mercator IP Address>/login/keycloak/callback"
KEYCLOAK_BASE_URL="<KeyCloak IP Address>"
KEYCLOAK_REALM="RealM Name"
KEYCLOAK_BTN_LABEL="Connexion SSO" # set the Keycloak login button label (defaults to 'Keycloak')
KEYCLOAK_FALLBACK_LOCAL=false
KEYCLOAK_AUTO_PROVISION=false
KEYCLOAK_AUTO_PROVISION_ROLE=User

